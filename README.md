# –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ —Ä–æ–º–∞–Ω—É ¬´–í–æ–π–Ω–∞ –∏ –º–∏—Ä¬ª

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–≥–æ –ø—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—è** –ø–æ —Ä–æ–º–∞–Ω—É –õ.–ù. –¢–æ–ª—Å—Ç–æ–≥–æ ¬´–í–æ–π–Ω–∞ –∏ –º–∏—Ä¬ª.  
–°–∏—Å—Ç–µ–º–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã **—Å—Ç—Ä–æ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—Å—Ç–∞ —Ä–æ–º–∞–Ω–∞**, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø–æ–∏—Å–∫ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é –ª–æ–∫–∞–ª—å–Ω–æ–π LLM.  
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é Docker.

---

## üß† –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–¢–æ—á–Ω–æ—Å—Ç—å**: –û—Ç–≤–µ—Ç—ã –æ—Å–Ω–æ–≤–∞–Ω—ã **—Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ–∫—Å—Ç–µ —Ä–æ–º–∞–Ω–∞**, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–Ω–∞–Ω–∏–π.
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø–æ–∏—Å–∫**: –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —Å —É—á—ë—Ç–æ–º —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –ª–æ–∫–∞—Ü–∏–π.
- **–ü–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSE (Server-Sent Events) –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –ª–æ–∫–∞—Ü–∏–π –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –∏ —Ç–µ–∫—Å—Ç–∞.
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ LangGraph –∏ LangChain.

---

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|----------|------------|
| **LLM** | –õ–æ–∫–∞–ª—å–Ω–æ, —á–µ—Ä–µ–∑ Ollama |
| **–ë—ç–∫–µ–Ω–¥** | Python 3.13, FastAPI, LangChain, LangGraph |
| **–í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** | ChromaDB |
| **–§—Ä–æ–Ω—Ç–µ–Ω–¥** | FastAPI + Jinja2 (SSR), HTML/JS –¥–ª—è SSE |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** | Docker, Docker Compose |

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- NVIDIA GPU (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ‚â•16 –ì–ë VRAM –¥–ª—è `qwen3:14b`)
- –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π)

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/Golden-Gekko/war-and-peace-qa-bot
   cd war-and-peace-qa-bot
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª—ã –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤:
   ```bash
   cp .env.example .env
   cp backend/.env.example backend/.env
   cp frontend/.env.example frontend/.env
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `backend/.env` —É–∫–∞–∑–∞–Ω—ã –Ω—É–∂–Ω—ã–µ –º–æ–¥–µ–ª–∏

4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Ñ–∞–π–ª–æ–≤ `.json` –≤ –ø–∞–ø–∫–µ JSON

### 3. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
docker-compose up --build
```

> –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
> - Ollama –∑–∞–≥—Ä—É–∑–∏—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏.
> - –°–∫—Ä–∏–ø—Ç `db_filling.py` –∑–∞–ø–æ–ª–Ω–∏—Ç ChromaDB.
> - –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

- –§—Ä–æ–Ω—Ç–µ–Ω–¥: [http://localhost:8000](http://localhost:8000)
- API (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤): `POST http://localhost:8000/api/generate`
  ```json
  { "message": "–ß—Ç–æ –¥–µ–ª–∞–ª –ü—å–µ—Ä –≤ –ë–æ—Ä–æ–¥–∏–Ω–æ?" }
  ```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ backend/               # FastAPI-–±—ç–∫–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ api/               # –ê–≥–µ–Ω—Ç, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –ø—Ä–æ–º–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ db/                # –†–∞–±–æ—Ç–∞ —Å ChromaDB
‚îÇ   ‚îú‚îÄ‚îÄ utils/             # –ü–∞—Ä—Å–µ—Ä EPUB, –ª–æ–≥–≥–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ db_filling.py      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
‚îú‚îÄ‚îÄ frontend/              # SSR-—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ FastAPI + Jinja2
‚îú‚îÄ‚îÄ docker-compose.yml     # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ Dockerfile.backend     # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—ç–∫–µ–Ω–¥–∞
‚îú‚îÄ‚îÄ Dockerfile.frontend    # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îî‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
```

---

## –í–∞–∂–Ω–æ

- –ü—Ä–æ–µ–∫—Ç **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –∑–Ω–∞–Ω–∏—è** ‚Äî –µ—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ–∫—Å—Ç–µ —Ä–æ–º–∞–Ω–∞, –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ:  
  > ¬´–í —Ç–µ–∫—Å—Ç–µ "–í–æ–π–Ω—ã –∏ –º–∏—Ä–∞" —ç—Ç–æ –Ω–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è¬ª.
- –î–ª—è —Ä–∞–±–æ—Ç—ã —Å GPU –≤ Docker —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π [NVIDIA Container Toolkit](https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html).
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ EPUB-—Ñ–∞–π–ª–∞ –∏–ª–∏ –º–æ–¥–µ–ª–µ–π ‚Äî —É–¥–∞–ª–∏—Ç–µ —Ç–æ–º `chroma_data`, [—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ](`db_filling.py`) –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
  ```bash
  docker-compose down -v
  docker-compose up --build
  ```—Ä–∞—Å–ø–∞—Ä—Å–∏—Ç EPUB, –∏–∑–≤–ª–µ—á—ë—Ç —Å—É—â–Ω–æ—Å—Ç–∏, —Å–æ–∑–¥–∞—Å—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –∏ 

### `db_filling.py`

–°–∫—Ä–∏–ø—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **–ø–∞—Ä—Å–∏–Ω–≥ EPUB-—Ñ–∞–π–ª–∞ —Ä–æ–º–∞–Ω–∞**, **–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π** (–ø–µ—Ä—Å–æ–Ω–∞–∂–∏, –ª–æ–∫–∞—Ü–∏–∏), **—Å–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤** –∏ **–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã ChromaDB**.  
–û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

#### –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

| –ê—Ä–≥—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `file_path` | –ü—É—Ç—å –∫ EPUB-—Ñ–∞–π–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `war_and_peace.epub`) |
| `start_from` | –ù–æ–º–µ—Ä —Ä–∞–∑–¥–µ–ª–∞ (–≥–ª–∞–≤—ã), —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É. –ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –ø—Ä–µ—Ä–≤–∞–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ. –ù—É–º–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å **1**. |

> ‚ö†Ô∏è –ï—Å–ª–∏ `file_path` –Ω–µ —É–∫–∞–∑–∞–Ω, —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ JSON-—Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `./JSON` –∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –∏–º–∏ ChromaDB.

#### ‚ñ∂Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞

##### 1. –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ EPUB-—Ñ–∞–π–ª–∞ —Å –Ω–∞—á–∞–ª–∞
```bash
python db_filling.py war_and_peace.epub
```

##### 2. –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å 15-–≥–æ —Ä–∞–∑–¥–µ–ª–∞ (–µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –±—ã–ª –ø—Ä–µ—Ä–≤–∞–Ω)
```bash
python db_filling.py war_and_peace.epub 15
```

> üí° –°–∫—Ä–∏–ø—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∂–¥—ã–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π JSON-—Ñ–∞–π–ª (`part_1.json`, `part_2.json`, ‚Ä¶).  
> –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —Å —Ç–µ–º –∂–µ `file_path` –∏ `start_from=N` –æ–Ω **–ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç** —Ñ–∞–π–ª—ã –Ω–∞—á–∏–Ω–∞—è —Å `part_N.json`.

##### 3. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ ChromaDB –∏–∑ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö JSON-—Ñ–∞–π–ª–æ–≤ (–±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ EPUB)
```bash
python db_filling.py
```
> –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ:
> - EPUB –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è.
> - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–ø–∫–∞ `./JSON` —Ä—è–¥–æ–º —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º.
> - –í—Å–µ `*.json` —Ñ–∞–π–ª—ã –≤ –Ω–µ–π –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ ChromaDB.

#### –í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤ –∫–æ–¥–µ)

- `CHUNK_SIZE = 2048` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ —Ç–µ–∫—Å—Ç–∞.
- `CHUNK_OVERLAP = 256` ‚Äî –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ —Ç–µ–∫—Å—Ç–∞.
- `EMBEDDING_SIZE = 1024` ‚Äî –æ–∂–∏–¥–∞–µ–º–∞—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ (–¥–ª—è `bge-m3`).

---

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [![Ollama](https://img.shields.io/badge/Ollama-black?logo=ollama&logoColor=white)](https://ollama.com) ‚Äî –∑–∞ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ LLM
- [![LangChain](https://img.shields.io/badge/LangChain-blue?logo=langchain)](https://langchain.com) ‚Äî –∑–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
- [![ChromaDB](https://img.shields.io/badge/ChromaDB-purple?logo=chromadb)](https://www.trychroma.com) ‚Äî –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- [![L.N. Tolstoy](https://img.shields.io/badge/–õ._–ù._–¢–æ–ª—Å—Ç–æ–π-8B4513)](https://tolstoy.ru/creativity/fiction/1071/) ‚Äî –∑–∞ "–í–æ–π–Ω—É –∏ –º–∏—Ä"
